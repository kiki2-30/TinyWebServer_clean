# TinyWebServer 压力测试结果记录

## 测试环境

**测试日期**: ____________

**硬件配置**:
- CPU: ____________ (核心数: ____)
- 内存: ____________
- 磁盘: ____________
- 网卡: ____________

**软件环境**:
- 操作系统: ____________
- 内核版本: ____________
- gcc版本: ____________
- MySQL版本: ____________

**系统参数**:
- somaxconn: ____________
- tcp_max_syn_backlog: ____________
- file-max: ____________
- ulimit -n: ____________

---

## WSL2环境测试结果

### 测试1: 3000并发

| 配置项 | 值 |
|--------|-----|
| 并发客户端数 | 3000 |
| 测试时长 | 30秒 |
| 触发模式 | LT+ET |
| 线程数 | 32 |
| **QPS** | **__________ pages/min** |
| **每秒请求数** | **__________ req/s** |
| 成功请求数 | __________ |
| 失败请求数 | __________ |
| **成功率** | **__________%** |
| CPU使用率 | _________% |
| 内存使用 | ________MB |

### 测试2: 5000并发（可选）

| 配置项 | 值 |
|--------|-----|
| 并发客户端数 | 5000 |
| 测试时长 | 30秒 |
| 触发模式 | LT+ET |
| 线程数 | 32 |
| **QPS** | **__________ pages/min** |
| **每秒请求数** | **__________ req/s** |
| 成功请求数 | __________ |
| 失败请求数 | __________ |
| **成功率** | **__________%** |
| CPU使用率 | _________% |
| 内存使用 | ________MB |

---

## Linux物理机测试结果

### 测试1: 1000并发（基础验证）

| 配置项 | 值 |
|--------|-----|
| 并发客户端数 | 1000 |
| 测试时长 | 30秒 |
| 触发模式 | LT+ET |
| 线程数 | _____ |
| **QPS** | **__________ pages/min** |
| **每秒请求数** | **__________ req/s** |
| 成功请求数 | __________ |
| 失败请求数 | __________ |
| **成功率** | **__________%** |
| CPU使用率 | _________% |
| 内存使用 | ________MB |

### 测试2: 3000并发（对比WSL2）

| 配置项 | 值 |
|--------|-----|
| 并发客户端数 | 3000 |
| 测试时长 | 30秒 |
| 触发模式 | LT+ET |
| 线程数 | _____ |
| **QPS** | **__________ pages/min** |
| **每秒请求数** | **__________ req/s** |
| 成功请求数 | __________ |
| 失败请求数 | __________ |
| **成功率** | **__________%** |
| CPU使用率 | _________% |
| 内存使用 | ________MB |
| **相比WSL2提升** | **______x** |

### 测试3: 5000并发

| 配置项 | 值 |
|--------|-----|
| 并发客户端数 | 5000 |
| 测试时长 | 30秒 |
| 触发模式 | LT+ET |
| 线程数 | _____ |
| **QPS** | **__________ pages/min** |
| **每秒请求数** | **__________ req/s** |
| 成功请求数 | __________ |
| 失败请求数 | __________ |
| **成功率** | **__________%** |
| CPU使用率 | _________% |
| 内存使用 | ________MB |

### 测试4: 10000并发

| 配置项 | 值 |
|--------|-----|
| 并发客户端数 | 10000 |
| 测试时长 | 30秒 |
| 触发模式 | LT+ET |
| 线程数 | _____ |
| **QPS** | **__________ pages/min** |
| **每秒请求数** | **__________ req/s** |
| 成功请求数 | __________ |
| 失败请求数 | __________ |
| **成功率** | **__________%** |
| CPU使用率 | _________% |
| 内存使用 | ________MB |

### 测试5: 10500并发（极限）

| 配置项 | 值 |
|--------|-----|
| 并发客户端数 | 10500 |
| 测试时长 | 5秒 |
| 触发模式 | LT+ET |
| 线程数 | _____ |
| **QPS** | **__________ pages/min** |
| **每秒请求数** | **__________ req/s** |
| 成功请求数 | __________ |
| 失败请求数 | __________ |
| **成功率** | **__________%** |
| CPU使用率 | _________% |
| 内存使用 | ________MB |

---

## 不同模式对比测试

### Proactor模式对比（3000并发）

| 模式 | QPS | 成功率 | CPU% | 备注 |
|------|-----|--------|------|------|
| LT+LT (-m 0) | ________ | ____% | ____% | 默认模式 |
| LT+ET (-m 1) | ________ | ____% | ____% | 推荐模式 |
| ET+LT (-m 2) | ________ | ____% | ____% | - |
| ET+ET (-m 3) | ________ | ____% | ____% | 高性能 |

### Reactor vs Proactor（3000并发）

| 模式 | QPS | 成功率 | CPU% | 备注 |
|------|-----|--------|------|------|
| Proactor (-a 0) | ________ | ____% | ____% | 主线程IO |
| Reactor (-a 1) | ________ | ____% | ____% | 工作线程IO |

---

## 线程数优化测试

### 不同线程数对比（3000并发，LT+ET）

| 线程数 | QPS | 成功率 | CPU% | 备注 |
|--------|-----|--------|------|------|
| 16 | ________ | ____% | ____% | - |
| 32 | ________ | ____% | ____% | - |
| 64 | ________ | ____% | ____% | - |
| 128 | ________ | ____% | ____% | - |

**最优线程数**: ________ (在此并发下QPS最高)

---

## 性能瓶颈分析

### 观察到的现象

1. **CPU瓶颈**: 
   - [ ] 未遇到
   - [ ] 遇到，CPU使用率达到 ____%
   
2. **内存瓶颈**:
   - [ ] 未遇到
   - [ ] 遇到，内存使用达到 ____%

3. **网络瓶颈**:
   - [ ] 未遇到
   - [ ] 遇到，现象: ____________

4. **连接队列溢出**:
   - [ ] 未遇到
   - [ ] 遇到，表现为: ____________

5. **文件描述符不足**:
   - [ ] 未遇到
   - [ ] 遇到，错误信息: ____________

### 遇到的问题和解决方案

**问题1**: ____________________________________________

**解决**: ____________________________________________

**问题2**: ____________________________________________

**解决**: ____________________________________________

---

## 性能对比总结

### WSL2 vs 物理机（3000并发）

```
┌──────────────┬──────────┬──────────┬──────────┐
│    指标      │   WSL2   │  物理机  │ 提升比例 │
├──────────────┼──────────┼──────────┼──────────┤
│ QPS          │ ______   │ ______   │ ____x    │
│ 成功率       │ ____%    │ ____%    │ ____     │
│ CPU使用率    │ ____%    │ ____%    │ ____     │
│ 内存使用     │ ____MB   │ ____MB   │ ____     │
└──────────────┴──────────┴──────────┴──────────┘
```

### 与原作者对比（10500并发）

| 项目 | 原作者 | 我的测试 | 差距 |
|------|--------|----------|------|
| 环境 | Ubuntu物理机 | ____________ | - |
| QPS | 93251 | ________ | ____% |
| 成功率 | 100% | _____% | - |

**差距分析**:
- [ ] 硬件差异（CPU/内存）
- [ ] 系统版本差异
- [ ] 配置参数差异
- [ ] 其他: ____________

---

## 测试结论

### 最佳配置

**推荐配置**:
```bash
./server -c 1 -m ____ -a ____ -s ____ -t ____
```

**理由**:
- ____________________________________________
- ____________________________________________

### 性能评估

**优点**:
1. ____________________________________________
2. ____________________________________________
3. ____________________________________________

**需要改进**:
1. ____________________________________________
2. ____________________________________________

### 面试准备

**数据亮点**（用于面试）:
- ✅ WSL2环境: 3000并发，________ QPS
- ✅ 物理机: 3000并发，________ QPS，**提升 ___x**
- ✅ 极限测试: 10500并发，________ QPS
- ✅ 成功率: _____%
- ✅ 系统稳定性: ____________

**话术模板**:
> "我对服务器进行了完整的压力测试，在WSL2环境下3000并发达到了XX QPS，
> 为了验证真实性能，我又在Linux物理机上测试，3000并发达到了XX QPS，
> 性能提升了X.X倍，最终在10500并发下达到了XX QPS，成功率XX%。
> 
> 通过对比测试，我深入理解了虚拟化对性能的影响、系统参数调优的重要性，
> 以及如何进行科学的性能测试和瓶颈分析。"

---

## 附录：测试截图

（粘贴测试结果截图）

### WebBench测试结果

### 服务器资源监控

### 系统参数配置

